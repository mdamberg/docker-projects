version: 2

models:
  - name: stg_transactions
    description: "Staging table for financial transaction data with type casting and
      key generation"
    columns:
      - name: transaction_pk
        description: "Primary key from raw table"
        tests:
          - unique
          - not_null
        config:
          meta:
            dimension:
              type: number
      - name: transaction_skey
        description: "Surrogate key for unique row identification"
        tests:
          - unique
          - not_null
        config:
          meta:
            dimension:
              type: string
      - name: account_key
        description: "Dimension key for grouping by account (1-to-many)"
        tests:
          - not_null
        config:
          meta:
            dimension:
              type: string
      - name: category_key
        description: "Dimension key for grouping by category (1-to-many)"
        tests:
          - not_null
        config:
          meta:
            dimension:
              type: string
      - name: account_type
        description: "Type of account (e.g., Credit Card, Checking, Savings)"
        config:
          meta:
            dimension:
              type: string
      - name: account_name
        description: "Name of the account"
        config:
          meta:
            dimension:
              type: string
      - name: account_number
        description: "Last digits of the account number"
        config:
          meta:
            dimension:
              type: string
      - name: transaction_name
        description: "Merchant or transaction name"
        config:
          meta:
            dimension:
              type: string
      - name: transaction_type
        description: "Type of transaction (e.g., debit, credit)"
        config:
          meta:
            dimension:
              type: string
      - name: transaction_amount
        description: "Transaction amount (negative for debits, positive for credits)"
        config:
          meta:
            dimension:
              type: number
      - name: transaction_category
        description: "Transaction category (e.g., Shopping, Groceries, Bills)"
        config:
          meta:
            dimension:
              type: string
      - name: transaction_date
        description: "Date of the transaction"
        config:
          meta:
            dimension:
              type: date
      - name: transaction_time
        description: "Time of the transaction in local timezone (America/Chicago)"
        config:
          meta:
            dimension:
              type: timestamp
      - name: date_inserted
        description: "Date the record was inserted into the raw table"
        config:
          meta:
            dimension:
              type: date
      - name: time_of_insertion
        description: "Time the record was inserted in local timezone (America/Chicago)"
        config:
          meta:
            dimension:
              type: timestamp
      - name: account_holder
        description: ""
        config:
          meta:
            dimension:
              type: string
      - name: rn
        description: ""
        config:
          meta:
            dimension:
              type: number
